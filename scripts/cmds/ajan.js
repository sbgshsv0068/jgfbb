const moment = require('moment-timezone');
 
module.exports.config = {
  name: "ajan",
  version: "2.0.0",
  role: 0,
  author: "SIDDIK",
  description: "AutoTime for prayer notifications",
  category: "AutoTime",
  countDown: 3
};
 
module.exports.onLoad = async ({ api }) => {
  const arrayData = {
    "05:04:00 AM": {
      message: `
â•­â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•®
â”ƒðŸŒ™âœ¨ à¦«à¦œà¦°à§‡à¦° à¦†à¦œà¦¾à¦¨ âœ¨ðŸŒ™â”ƒ
â•°â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•¯
 
ðŸ“¿ à¦†à¦¸à¦¸à¦¾à¦²à¦¾à¦®à§ à¦†à¦²à¦¾à¦‡à¦•à§à¦®!ðŸ–¤ðŸ’«
à¦ªà§à¦°à¦¿à§Ÿ à¦®à§à¦¸à¦²à¦¿à¦® à¦­à¦¾à¦‡ à¦“ à¦¬à§‹à¦¨à§‡à¦°à¦¾, 
à¦à¦–à¦¨ à¦«à¦œà¦°à§‡à¦° à¦†à¦œà¦¾à¦¨ à¦¦à§‡à¦“à§Ÿà¦¾ à¦¹à§Ÿà§‡à¦›à§‡à¥¤ 
à¦¨à¦¾à¦®à¦¾à¦œà§‡à¦° à¦œà¦¨à§à¦¯ à¦ªà§à¦°à¦¸à§à¦¤à§à¦¤à¦¿ à¦¨à¦¿à¦¨à¥¤
à¦«à¦œà¦°à§‡à¦° à¦¨à¦¾à¦®à¦¾à¦œ à¦•à¦¿à¦›à§ à¦¸à¦®à§Ÿà§‡à¦° à¦®à¦§à§à¦¯à§‡à¦‡ à¦¶à§à¦°à§ à¦¹à¦¬à§‡à¥¤âœ¨ðŸ§¡
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ðšƒðš‘ðšŽ ð™²ðšŠðš•ðš• ðšƒðš˜ ð™¿ðš›ðšŠðš¢ðšŽðš› ðš†ðšŠðšœ ð™¶ðš’ðšŸðšŽðš—
`
    },
    "12:59:00 PM": {
      message: `
â•­â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•®
â”ƒðŸŒ™âœ¨ à¦œà§‹à¦¹à¦°à§‡à¦° à¦†à¦œà¦¾à¦¨ âœ¨ðŸŒ™â”ƒ
â•°â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•¯
 
ðŸ“¿ à¦†à¦¸à¦¸à¦¾à¦²à¦¾à¦®à§ à¦†à¦²à¦¾à¦‡à¦•à§à¦®!ðŸ–¤ðŸ’«
à¦ªà§à¦°à¦¿à§Ÿ à¦®à§à¦¸à¦²à¦¿à¦® à¦­à¦¾à¦‡ à¦“ à¦¬à§‹à¦¨à§‡à¦°à¦¾, 
à¦à¦–à¦¨ à¦œà§‹à¦¹à¦°à§‡à¦° à¦†à¦œà¦¾à¦¨ à¦¦à§‡à¦“à§Ÿà¦¾ à¦¹à§Ÿà§‡à¦›à§‡à¥¤ 
à¦¨à¦¾à¦®à¦¾à¦œà§‡à¦° à¦œà¦¨à§à¦¯ à¦ªà§à¦°à¦¸à§à¦¤à§à¦¤à¦¿ à¦¨à¦¿à¦¨à¥¤
à¦œà§‹à¦¹à¦°à§‡à¦° à¦¨à¦¾à¦®à¦¾à¦œ à¦•à¦¿à¦›à§ à¦¸à¦®à§Ÿà§‡à¦° à¦®à¦§à§à¦¯à§‡à¦‡ à¦¶à§à¦°à§ à¦¹à¦¬à§‡à¥¤âœ¨ðŸ§¡
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ðšƒðš‘ðšŽ ð™²ðšŠðš•ðš• ðšƒðš˜ ð™¿ðš›ðšŠðš¢ðšŽðš› ðš†ðšŠðšœ ð™¶ðš’ðšŸðšŽðš—
`
    },
    "03:44:00 PM": {
      message: `
â•­â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•®
â”ƒ ðŸŒ™âœ¨ à¦†à¦¸à¦° à¦†à¦œà¦¾à¦¨ âœ¨ðŸŒ™ â”ƒ
â•°â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•¯
 
ðŸ“¿ à¦†à¦¸à¦¸à¦¾à¦²à¦¾à¦®à§ à¦†à¦²à¦¾à¦‡à¦•à§à¦®!ðŸ–¤ðŸ’«
à¦ªà§à¦°à¦¿à§Ÿ à¦®à§à¦¸à¦²à¦¿à¦® à¦­à¦¾à¦‡ à¦“ à¦¬à§‹à¦¨à§‡à¦°à¦¾, 
à¦à¦–à¦¨ à¦†à¦¸à¦° à¦†à¦œà¦¾à¦¨ à¦¦à§‡à¦“à§Ÿà¦¾ à¦¹à§Ÿà§‡à¦›à§‡à¥¤ 
à¦¨à¦¾à¦®à¦¾à¦œà§‡à¦° à¦œà¦¨à§à¦¯ à¦ªà§à¦°à¦¸à§à¦¤à§à¦¤à¦¿ à¦¨à¦¿à¦¨à¥¤
à¦†à¦¸à¦°à§‡à¦° à¦¨à¦¾à¦®à¦¾à¦œ à¦•à¦¿à¦›à§ à¦¸à¦®à§Ÿà§‡à¦° à¦®à¦§à§à¦¯à§‡à¦‡ à¦¶à§à¦°à§ à¦¹à¦¬à§‡à¥¤âœ¨ðŸ§¡
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ðšƒðš‘ðšŽ ð™²ðšŠðš•ðš• ðšƒðš˜ ð™¿ðš›ðšŠðš¢ðšŽðš› ðš†ðšŠðšœ ð™¶ðš’ðšŸðšŽðš—
`
    },
    "06:03:00 PM": {
      message: `
  â€ŽðŸŒ™âœ¨ à¦®à¦¾à¦—à¦°à¦¿à¦¬ à¦†à¦œà¦¾à¦¨ & à¦‡à¦«à¦¤à¦¾à¦° âœ¨ðŸŒ™
â€Žâœ¨â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”âœ¨
â€ŽðŸ“¿ à¦†à¦¸à¦¸à¦¾à¦²à¦¾à¦®à§ à¦†à¦²à¦¾à¦‡à¦•à§à¦®! ðŸ–¤ðŸ’«
â€Ž
â€Žà¦ªà§à¦°à¦¿à¦¯à¦¼ à¦®à§à¦¸à¦²à¦¿à¦® à¦­à¦¾à¦‡ à¦“ à¦¬à§‹à¦¨à§‡à¦°à¦¾,
â€Žà¦®à¦¾à¦—à¦°à¦¿à¦¬ à¦à¦° à¦†à¦œà¦¾à¦¨ à¦à¦° à¦¸à¦®à§Ÿ à¦¹à§Ÿà§‡ à¦—à§‡à¦›à§‡
â€Ž à¦‡à¦«à¦¤à¦¾à¦°à§‡à¦° à¦ªà§à¦°à¦¸à§à¦¤à§à¦¤à¦¿ à¦¨à¦¿à¦¨à¥¤
â€Žà¦¤à¦¾à§œà¦¾à¦¤à¦¾à§œà¦¿ à¦–à§‡à¦œà§à¦° à¦“ à¦ªà¦¾à¦¨à¦¿ à¦¨à¦¿à¦¯à¦¼à§‡ à¦¬à¦¸à§‡ à¦ªà§œà§à¦¨! ðŸ½ï¸ðŸ§¡
â€Ž
â€Žà¦‡à¦«à¦¤à¦¾à¦° à¦¶à§‡à¦·à§‡ à¦¯à§‡à¦¨ à¦¨à¦¾à¦®à¦¾à¦œ à¦†à¦¦à¦¾à¦¯à¦¼ à¦•à¦°à¦¤à§‡ à¦­à§à¦²à¦¬à§‡à¦¨ à¦¨à¦¾! âœ¨
â€Ž
â€Žâœ¨â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”âœ¨
â€ŽðŸ½ï¸ à¦¦à§‹à§Ÿà¦¾ à¦•à¦°à§‡ à¦‡à¦«à¦¤à¦¾à¦° à¦•à¦°à§à¦¨, 
â€Žà¦†à¦²à§à¦²à¦¾à¦¹ à¦•à¦¬à§à¦² à¦•à¦°à§à¦¨! ðŸ¤²âœ¨
â€Ž`
    },
    "07:29:00 PM": {
      message: `
ðŸŒ™âœ¨  à¦‡à¦¶à¦¾ à¦†à¦œà¦¾à¦¨  âœ¨ðŸŒ™  
â€Žâœ¨â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”âœ¨
ðŸ“¿ à¦†à¦¸à¦¸à¦¾à¦²à¦¾à¦®à§ à¦†à¦²à¦¾à¦‡à¦•à§à¦®!ðŸ–¤ðŸ’«

à¦ªà§à¦°à¦¿à§Ÿ à¦®à§à¦¸à¦²à¦¿à¦® à¦­à¦¾à¦‡ à¦“ à¦¬à§‹à¦¨à§‡à¦°à¦¾, 
à¦à¦–à¦¨ à¦‡à¦¶à¦¾ à¦à¦° à¦†à¦œà¦¾à¦¨ à¦¦à§‡à¦“à§Ÿà¦¾ à¦¹à§Ÿà§‡à¦›à§‡à¥¤ 
à¦¨à¦¾à¦®à¦¾à¦œà§‡à¦° à¦œà¦¨à§à¦¯ à¦ªà§à¦°à¦¸à§à¦¤à§à¦¤à¦¿ à¦¨à¦¿à¦¨à¥¤
à¦‡à¦¶à¦¾ à¦¨à¦¾à¦®à¦¾à¦œ à¦•à¦¿à¦›à§ à¦¸à¦®à§Ÿà§‡à¦° à¦®à¦§à§à¦¯à§‡à¦‡ à¦¶à§à¦°à§ à¦¹à¦¬à§‡à¥¤âœ¨ðŸ§¡

â€Žâœ¨â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”âœ¨
ðšƒðš‘ðšŽ ð™²ðšŠðš•ðš• ðšƒðš˜ ð™¿ðš›ðšŠðš¢ðšŽðš› ðš†ðšŠðšœ ð™¶ðš’ðšŸðšŽðš—
`
    }
  };
 
  const checkTimeAndSendMessage = () => {
    const now = moment().tz('Asia/Dhaka');
    const currentTime = now.format('hh:mm:ss A');
 
    const messageData = arrayData[currentTime];
 
    if (messageData) {
      const tid = global.db.allThreadData.map(i => i.threadID);
      tid.forEach(async (threadID) => {
        api.sendMessage({ body: messageData.message }, threadID);
      });
    }
 
    const nextMinute = moment().add(1, 'minute').startOf('minute');
    const delay = nextMinute.diff(moment());
    setTimeout(checkTimeAndSendMessage, delay);
  };
 
  checkTimeAndSendMessage();
};
 
module.exports.onStart = () => {};
 
